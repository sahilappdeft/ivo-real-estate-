{% extends "auth-base.html" %}
{% load static %}

{% block content %}

<!--start wrapper-->
<div class="wrapper-auth h-full py-5 bg-lightest">
    <div class="container">
        <h3 class="text-center fs-3 text-black fw-bold mb-5">Letâ€™s get started with adding your office details!</h3>
        <div class="text-center d-flex indicators-step justify-content-center mb-4">
            <span class="step-indicator active" id="step-1-indicator">1</span>
            <span class="step-indicator" id="step-2-indicator">2</span>
            <span class="step-indicator" id="step-3-indicator">3</span>
        </div>
        <form id="multi-step-form">
            <!-- office detail -->
            <div class="form-step active" id="step-1">
                <div class="text-center mb-5">
                    <h4 class="text-black fs-5 fw-bold mb-3">Office Information</h4>
                    <p class="text-gray-color fw-medium">Begin by entering the basic information about the office.
                        This may include
                        the office name, location, contact details, and a unique identifier or code. <span
                            class="fw-bold">Specify the office's type and purposes, such as a property management
                            office or
                            social worker.</span> </p>
                </div>
                <div class="card shadow-none border-0 p-4 mb-5">
                    <div class="card-body">
                        <h2 class="text-main fs-5 fw-semibold mb-4">Enter Office Details</h2>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="office-name">Office
                                        Name</label>
                                    <input type="text" class="form-control" id="office-name" name="office-name"
                                        placeholder="Enter Office Name">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="office-purpose">Office
                                        Purpose</label>
                                    <select class="form-control" id="office-purpose" name="office-purpose">
                                        <option value="">Select Office Purpose</option>
                                        <option value="property-management">Property Management</option>
                                        <option value="social-worker">Social Worker</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="address">Address</label>
                                    <input type="text" class="form-control" id="address" name="address"
                                        placeholder="Enter Address">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="street">Street</label>
                                    <input type="text" class="form-control" id="street" name="street"
                                        placeholder="Enter Street">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="zip-code">Zip
                                        Code</label>
                                    <input type="text" class="form-control" id="zip-code" name="zip-code"
                                        placeholder="Enter Zip Code">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="city">City</label>
                                    <input type="text" class="form-control" id="city" name="city"
                                        placeholder="Enter City">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="city">City
                                        Division</label>
                                    <input type="text" class="form-control" id="city" name="city"
                                        placeholder="Enter City">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="country">Country</label>
                                    <input type="text" class="form-control" id="country" name="country"
                                        placeholder="Enter Country">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="office-email">Office
                                        Email
                                        Address</label>
                                    <input type="email" class="form-control" id="office-email" name="office-email"
                                        placeholder="Enter Email Address">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="phone-number">Phone
                                        Number</label>
                                    <input type="text" class="form-control" id="phone-number" name="phone-number"
                                        placeholder="Enter Phone Number">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <button type="button" class="btn fs-6 fw-normal py-2 bg-main text-white px-5 next-btn"
                        data-next="step-2">Next</button>
                </div>
            </div>
            <div class="form-step" id="step-2">
                <div class="text-center mb-5">
                    <h4 class="text-black fs-5 fw-bold mb-3">Financial Details</h4>
                    <p class="text-gray-color fw-medium">Begin by entering the basic information about the office.
                        This may include
                        the office name, location, contact details, and a unique identifier or code. <span
                            class="fw-bold">Specify the office's type and purposes, such as a property management
                            office or
                            social worker.</span> </p>
                </div>

                <!-- financial detail -->
                <div class="card shadow-none border-0 p-4 mb-5">
                    <div class="card-body">
                        <h2 class="text-main fs-5 fw-semibold mb-4">Enter Financial Details</h2>
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="office-name">Cost
                                        Centre</label>
                                    <input type="text" class="form-control" id="office-name" name="office-name"
                                        placeholder="Enter Office Name">
                                </div>
                            </div>
                        </div>
                        <div class="d-flex align-items-center justify-content-between mb-4">
                            <h2 class="text-main fs-5 fw-semibold">Add Bank Accounts</h2>
                            <button type="button" class="btn fs-6 fw-normal py-2 bg-main text-white px-5"
                                id="add-financial-fields">Add</button>
                        </div>
                        <table class="financial-table">
                            <thead>
                                <tr>
                                    <th>Purpose</th>
                                    <th>Owner Name</th>
                                    <th>IBAN</th>
                                    <th>BIC</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="financial-table-form">

                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="text-center">
                    <button type="button" class="btn btn-outline-primary prev-btn px-5 fs-6 py-2"
                        data-prev="step-1">Back</button>
                    <button type="button" class="btn fs-6 fw-normal py-2 bg-main text-white px-5 next-btn"
                        data-next="step-3">Next</button>
                </div>
            </div>

            <!--  Invite Your Employees -->
            <div class="form-step" id="step-3">
                <div class="text-center mb-5">
                    <h4 class="text-black fs-5 fw-bold mb-3"> Invite Your Employees
                    </h4>
                    <p class="text-gray-color fw-medium">Invite your employees by adding their email IDs.</p>
                </div>

                <!-- financial detail -->
                <div class="card shadow-none border-0 p-4 mb-5">
                    <div class="card-body">
                        <h2 class="text-main fs-5 fw-semibold mb-4">Invite Employee</h2>
                        <div class="row mb-4">
                            <div class="col-md-12">
                                <div class="form-group mb-3">
                                    <label class="font-14 fw-semibold text-black mb-1" for="office-name">Email
                                        Address</label>
                                    <div id="chip-container" class="p-2 d-flex border rounded">
                                        <div id="chip-show-box"></div>
                                        <input type="text" id="chip-input"
                                            class="form-control border-0 shadow-none w-auto"
                                            placeholder="Type something and press enter">
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <button type="button" class="btn btn-outline-primary prev-btn px-5 fs-6 py-2"
                        data-prev="step-2">Back</button>
                    <button type="button" class="btn btn-outline-primary px-5 fs-6 py-2" data-bs-toggle="modal"
                        data-bs-target="#previewmodal">Preview</button>
                    <button type="button" class="btn fs-6 fw-normal py-2 bg-main text-white px-5 "
                        data-bs-toggle="modal" data-bs-target="#selectrolemodal">Save</button>
                </div>
            </div>
        </form>
    </div>
</div>
<!--end wrapper-->
<!-- select role modal -->
<div class="modal" id="selectrolemodal">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header bg-main">
                <h4 class="modal-title text-center fs-5 ms-auto text-white">Invite </h4>
                <button type="button" class="btn-close text-white" data-bs-dismiss="modal"
                    style="filter: invert(126);"></button>
            </div>

            <!-- Modal body -->
            <div class="modal-body p-4">
                <p class="text-black fw-medium text-center">
                    <img src="./assets/images/icons/paperplane.png" alt="" width="28" class="me-2" />
                    Invite:
                    <span class="text-main">handry@gmail.com</span>
                </p>

                <div class="d-flex justify-content-center gap-3">
                    <div class="profile-role ">
                        <img src="./assets/images/authentication/admin.png" alt="" style="width:70%" />
                    </div>
                    <div class="profile-role">
                        <img src="./assets/images/authentication/backend.png" alt="" style="width:80%" />
                    </div>
                    <div class="profile-role">
                        <img src="./assets/images/authentication/social-worker.png" alt="" style="width:80%" />
                    </div>
                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer border-0 justify-content-center pb-4">
                <button type="button" class="btn bg-main fs-6 p-2 text-white px-5">Send</button>
            </div>

        </div>
    </div>
</div>
<!-- preview modal -->
<div class="modal" id="previewmodal">
    <div class="modal-dialog modal-dialog-centered modal-md">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header bg-main">
                <h4 class="modal-title text-center fs-5 ms-auto text-white">Preview</h4>
                <button type="button" class="btn-close text-white" data-bs-dismiss="modal"
                    style="filter: invert(126);"></button>
            </div>

            <!-- Modal body -->
            <div class="modal-body p-4">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <small class="preview-heading fw-semibold">Office Name</small>
                    </div>
                    <div class="col-md-6">
                        <small class="preview-data">Sozial- und Jugenddienste</small>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <small class="preview-heading fw-semibold">Office Nick Name</small>
                    </div>
                    <div class="col-md-6">
                        <small class="preview-data">Landsberger Allee</small>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <small class="preview-heading fw-semibold">Office Purpose</small>
                    </div>
                    <div class="col-md-6">
                        <small class="preview-data">Landsberger Allee</small>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <small class="preview-heading fw-semibold">Street</small>
                    </div>
                    <div class="col-md-6">
                        <small class="preview-data">Landsberger Allee</small>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <small class="preview-heading fw-semibold">Street no.</small>
                    </div>
                    <div class="col-md-6">
                        <small class="preview-data">214a</small>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <small class="preview-heading fw-semibold">ZIP-code</small>
                    </div>
                    <div class="col-md-6">
                        <small class="preview-data">10115</small>
                    </div>
                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer gap-1 border-0 justify-content-center pb-4">
                <button type="button" class="btn m-0 fs-6 p-2 px-5 btn-outline-primary text-main">Back</button>
                <button type="button" class="btn bg-main m-0 fs-6 p-2 text-white px-5">Send</button>
            </div>

        </div>
    </div>
</div>
<script>
    $(document).ready(function () {

        // chips
        $('#chip-input').on('keypress', function (e) {
            if (e.which == 13) { // Enter key pressed
                e.preventDefault();
                var text = $(this).val().trim();
                if (text) {
                    var chip = $('<span class="chip"></span>').text(text);
                    var closeBtn = $('<span class="close-btn">&times;</span>');
                    chip.append(closeBtn);
                    $('#chip-show-box').append(chip);
                    $(this).val('');
                }
            }
        });

        $(document).on('click', '.chip .close-btn', function () {
            $(this).parent().remove();
        });


        $('#add-financial-fields').on('click', function () {
            var html = `<tr>
                            <td><input type="text" class="form-control" name="purpose"></td>
                            <td><input type="text" class="form-control" name="purpose"></td>
                            <td><input type="text" class="form-control" name="iban"></td>
                            <td><input type="text" class="form-control" name="bic"></td>
                            <td>
                                <div class="d-flex gap-3">
                                    <i class='bx bxs-check-circle save-btn fs-4 text-gray-color'> </i><i class='bx bxs-plus-circle rotate-90 fs-4 text-gray-color' ></i>
                                </div>
                            </td>
                        </tr>`;

            $('#financial-table-form').append(html)
        });

        // Show the first step
        $('.form-step').first().addClass('active');

        // Handle the Next button click
        $('.next-btn').on('click', function () {
            var nextStep = $(this).data('next');
            var currentStep = $(this).closest('.form-step');
            var nextStepElement = $('#' + nextStep);

            currentStep.removeClass('active').hide();
            nextStepElement.addClass('active').show();

            $('.step-indicator').removeClass('active');
            $('#' + nextStep + '-indicator').addClass('active');
        });

        // Handle the Previous button click
        $('.prev-btn').on('click', function () {
            var prevStep = $(this).data('prev');
            var currentStep = $(this).closest('.form-step');
            var prevStepElement = $('#' + prevStep);

            currentStep.removeClass('active').hide();
            prevStepElement.addClass('active').show();

            $('.step-indicator').removeClass('active');
            $('#' + prevStep + '-indicator').addClass('active');
        });


        $(document).on('click', '.save-btn', function () {
            var row = $(this).closest('tr');
            var purpose = row.find('input[type="text"]').val();
            var ownername = row.find('input[type="text"]').val();
            var iban = row.find('input[type="text"]').val();
            var bic = row.find('input[type="text"]').val();


            var originalRow = '<tr>' +
                '<td>' + purpose + '</td>' +
                '<td>' + ownername + '</td>' +
                '<td>' + iban + '</td>' +
                '<td>' + bic + '</td>' +
                '<td><button class="btn btn-primary edit-btn">Edit</button> </td>' +
                '</tr>';

            row.replaceWith(originalRow);
        });

        // select role
        $(".profile-role").click(function () {
            // Remove active class from all roles
            $(".profile-role").removeClass("active-role");

            // Add active class to the clicked role
            $(this).addClass("active-role");
        });
    });
</script>
{% endblock %}